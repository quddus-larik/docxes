---
title: Architecture
description: Deep dive into the DocXes documentation engine and rendering pipeline.
---

# Architecture

DocXes is built with a focus on high-performance documentation rendering. It decouples content processing from the UI layer using a custom framework-agnostic engine.

## The Rendering Pipeline

When you request a documentation page, DocXes follows a structured pipeline to transform raw MDX files into interactive React components.

### 1. Request Handling
Every request to `/docs/[version]/[slug]` is captured by a Next.js dynamic route. The `useContentData` hook orchestrates the data fetching process.

### 2. The DocXes Engine Core
The heart of the system is the `DocxesEngine` located in `core/engine`. It performs the following steps:

1.  **Parse**: Uses `gray-matter` to extract frontmatter and `remark` to generate an initial Abstract Syntax Tree (AST).
2.  **Transform**: Scans the AST to generate metadata, such as the Table of Contents (TOC) and reading time.
3.  **Compile**: Converts the MDX content into a serializable JavaScript object using `next-mdx-remote/serialize`.
4.  **Cache**: Stores the output (AST, metadata, and compiled code) in the `.docxes` directory. Subsequent requests for the same file are served instantly from this cache.

### 3. Client Hydration
The compiled code is passed to the `AppMDXProvider`, which uses the `DocxesRenderer`. This component hydrates the static content on the client, injecting custom interactive components like code blocks with copy buttons and alerts.

---

## Navigation & Sidebar

The sidebar logic is driven by the file system but enriched by the engine.

-   **Structure**: The `generateNavigation` function recursively scans the `content/docs` directory.
-   **Metadata**: It uses the engine's `parse` method to read the `title` and `order` directly from each file's frontmatter.
-   **Dynamic Tree**: This results in a nested navigation object that is passed to the `DocSidebar` component.

---

## Table of Contents (TOC)

DocXes generates the Table of Contents automatically without any manual configuration.

1.  **Extraction**: During the engine's transformation phase, it visits all `heading` nodes in the AST.
2.  **ID Generation**: It generates URL-safe slugs for each heading (e.g., `#the-rendering-pipeline`).
3.  **Rendering**: The `DocTOC` component receives these headings as metadata. It uses a custom hook (`useDocTOC`) to track the user's scroll position and highlight the active section in real-time.

---

## Performance Strategy

DocXes is optimized for "Production-Level" speed:

-   **Pre-compiled Artifacts**: By caching the compiled MDX in `.docxes`, we eliminate the heavy processing overhead on the server.
-   **Incremental Updates**: Only modified files are re-processed, making it perfect for large documentation sites.
-   **Node Standard Imports**: Using `node:fs/promises` ensures the engine runs efficiently in the Next.js runtime environment.
-   **Framework Agnostic**: The engine is decoupled from the UI, meaning the core logic can be tested and run independently of Next.js.
